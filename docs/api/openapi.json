{"openapi":"3.0.2","info":{"title":"КИП","description":"API для приложения учёта КИП процессов в геофизике","version":"0.1"},"paths":{"/v1/auth/sign_in":{"post":{"tags":["Authentication"],"summary":"Sign In","operationId":"sign_in_v1_auth_sign_in_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_sign_in_v1_auth_sign_in_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/auth/refresh_token":{"put":{"tags":["Authentication"],"summary":"Refresh Token","operationId":"refresh_token_v1_auth_refresh_token_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserToken"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/device_pool/":{"post":{"tags":["Device Pool"],"summary":"Add Device Into Pool","operationId":"add_device_into_pool_v1_device_pool__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_add_device_into_pool_v1_device_pool__post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/device_pool/device":{"get":{"tags":["Device Pool"],"summary":"Get Device By Params","operationId":"get_device_by_params_v1_device_pool_device_get","parameters":[{"required":false,"schema":{"title":"Name","type":"string"},"name":"name","in":"query"},{"required":false,"schema":{"title":"Category","type":"string"},"name":"category","in":"query"},{"required":false,"schema":{"title":"Price","type":"number"},"name":"price","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/device_pool/device/{device_id}":{"get":{"tags":["Device Pool"],"summary":"Get Device By Id","operationId":"get_device_by_id_v1_device_pool_device__device_id__get","parameters":[{"required":true,"schema":{"title":"Device Id","type":"string"},"name":"device_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/device_pool/{device_id}":{"put":{"tags":["Device Pool"],"summary":"Update Device By Id","operationId":"update_device_by_id_v1_device_pool__device_id__put","parameters":[{"required":true,"schema":{"title":"Device Id"},"name":"device_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_update_device_by_id_v1_device_pool__device_id__put"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/":{"get":{"tags":["Devices In Use"],"summary":"Get Devices By Params In Pages","operationId":"get_devices_by_params_in_pages_v1_devices_in_use__get","parameters":[{"required":false,"schema":{"title":"Category","type":"string"},"name":"category","in":"query"},{"required":false,"schema":{"title":"Person Id","type":"string","format":"uuid"},"name":"person_id","in":"query"},{"required":false,"schema":{"title":"Action","type":"string"},"name":"action","in":"query"},{"required":false,"schema":{"title":"Place","type":"string"},"name":"place","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Devices By Params In Pages V1 Devices In Use  Get","type":"array","items":{"$ref":"#/components/schemas/DeviceInUseOut"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Devices In Use"],"summary":"Add Device","operationId":"add_device_v1_devices_in_use__post","parameters":[{"required":true,"schema":{"title":"Responsible Person","type":"string"},"name":"responsible_person","in":"query"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActiveDevicePost"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/categories":{"get":{"tags":["Devices In Use"],"summary":"Get Available Categories","operationId":"get_available_categories_v1_devices_in_use_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/specifications":{"get":{"tags":["Devices In Use"],"summary":"Get Avaiable Specifications","operationId":"get_avaiable_specifications_v1_devices_in_use_specifications_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/reposponsible_persons":{"get":{"tags":["Devices In Use"],"summary":"Get Reponsible Presons","operationId":"get_reponsible_presons_v1_devices_in_use_reposponsible_persons_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/actions":{"get":{"tags":["Devices In Use"],"summary":"Get Status","operationId":"get_status_v1_devices_in_use_actions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/places":{"get":{"tags":["Devices In Use"],"summary":"Get Places Of Installation","operationId":"get_places_of_installation_v1_devices_in_use_places_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/device/{id}":{"get":{"tags":["Devices In Use"],"summary":"Get Device","operationId":"get_device_v1_devices_in_use_device__id__get","parameters":[{"required":true,"schema":{"title":"Id"},"name":"id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActiveDeviceGet"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"put":{"tags":["Devices In Use"],"summary":"Update Device","operationId":"update_device_v1_devices_in_use_device__id__put","parameters":[{"required":true,"schema":{"title":"Id"},"name":"id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActiveDevicePost"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"patch":{"tags":["Devices In Use"],"summary":"Apply New Action","operationId":"apply_new_action_v1_devices_in_use_device__id__patch","parameters":[{"required":true,"schema":{"title":"Id"},"name":"id","in":"path"},{"required":true,"schema":{"title":"Action","type":"string"},"name":"action","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/device/{id}/ammortization":{"get":{"tags":["Devices In Use"],"summary":"Calc Ammortization","operationId":"calc_ammortization_v1_devices_in_use_device__id__ammortization_get","parameters":[{"required":true,"schema":{"title":"Id"},"name":"id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/device/{id}/time_in_use":{"get":{"tags":["Devices In Use"],"summary":"Calc Time In Use","operationId":"calc_time_in_use_v1_devices_in_use_device__id__time_in_use_get","parameters":[{"required":true,"schema":{"title":"Id"},"name":"id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/devices_in_use/device/{id}/remaining_resource_until_check":{"get":{"tags":["Devices In Use"],"summary":"Calc Remaining Time","operationId":"calc_remaining_time_v1_devices_in_use_device__id__remaining_resource_until_check_get","parameters":[{"required":true,"schema":{"title":"Id"},"name":"id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/users/":{"get":{"tags":["Users"],"summary":"Get Users Pages","operationId":"get_users_pages_v1_users__get","parameters":[{"required":false,"schema":{"title":"Role","type":"string"},"name":"role","in":"query"},{"required":false,"schema":{"title":"Page","minimum":1.0,"type":"integer","default":1},"name":"page","in":"query"},{"required":false,"schema":{"title":"Size","maximum":100.0,"minimum":1.0,"type":"integer","default":50},"name":"size","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Page_UserOut_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/users/roles":{"get":{"tags":["Users"],"summary":"Get Roles","operationId":"get_roles_v1_users_roles_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/users/{user_id}/":{"get":{"tags":["Users"],"summary":"Get User By Id","operationId":"get_user_by_id_v1_users__user_id___get","parameters":[{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/users/user":{"get":{"tags":["Users"],"summary":"Get User By Params","operationId":"get_user_by_params_v1_users_user_get","parameters":[{"required":false,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"query"},{"required":false,"schema":{"title":"Username","type":"string"},"name":"username","in":"query"},{"required":false,"schema":{"title":"Email","type":"string","format":"email"},"name":"email","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Users"],"summary":"Add User","operationId":"add_user_v1_users_user_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCredentials"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"ActiveDeviceGet":{"title":"ActiveDeviceGet","required":["invent_number","serial_number","place","device_id"],"type":"object","properties":{"id":{"title":"Id","type":"string","format":"uuid"},"invent_number":{"title":"Invent Number","maxLength":50,"type":"string"},"serial_number":{"title":"Serial Number","maxLength":50,"type":"string"},"place":{"title":"Place","maxLength":60,"type":"string"},"device_id":{"title":"Device Id","type":"string","format":"uuid"}},"additionalProperties":false,"description":"The Active devices model"},"ActiveDevicePost":{"title":"ActiveDevicePost","required":["invent_number","serial_number","place","device_id"],"type":"object","properties":{"invent_number":{"title":"Invent Number","maxLength":50,"type":"string"},"serial_number":{"title":"Serial Number","maxLength":50,"type":"string"},"place":{"title":"Place","maxLength":60,"type":"string"},"device_id":{"title":"Device Id","type":"string","format":"uuid"}},"additionalProperties":false,"description":"The Active devices model"},"Body_add_device_into_pool_v1_device_pool__post":{"title":"Body_add_device_into_pool_v1_device_pool__post","required":["device_specs","device_info"],"type":"object","properties":{"device_specs":{"$ref":"#/components/schemas/DevicePoolPost"},"device_info":{"$ref":"#/components/schemas/Device"}}},"Body_sign_in_v1_auth_sign_in_post":{"title":"Body_sign_in_v1_auth_sign_in_post","required":["username","password"],"type":"object","properties":{"grant_type":{"title":"Grant Type","pattern":"password","type":"string"},"username":{"title":"Username","type":"string"},"password":{"title":"Password","type":"string"},"scope":{"title":"Scope","type":"string","default":""},"client_id":{"title":"Client Id","type":"string"},"client_secret":{"title":"Client Secret","type":"string"}}},"Body_update_device_by_id_v1_device_pool__device_id__put":{"title":"Body_update_device_by_id_v1_device_pool__device_id__put","required":["device_info"],"type":"object","properties":{"device_info":{"$ref":"#/components/schemas/Device"},"device_specs":{"$ref":"#/components/schemas/DevicePoolPost"}}},"Device":{"title":"Device","required":["name","check_intervals","category","price","resource"],"type":"object","properties":{"name":{"title":"Name","maxLength":150,"type":"string"},"check_intervals":{"title":"Check Intervals","maximum":2147483647.0,"minimum":-2147483648.0,"type":"integer"},"category":{"title":"Category","maxLength":30,"type":"string"},"price":{"title":"Price","type":"number"},"resource":{"title":"Resource","maximum":2147483647.0,"minimum":-2147483648.0,"type":"integer"},"resource_of_useful_usage":{"title":"Resource Of Useful Usage","maximum":2147483647.0,"minimum":-2147483648.0,"type":"integer","default":5}},"additionalProperties":false,"description":"The Devices Pool model"},"DeviceInUseOut":{"title":"ActiveDeviceGet","required":["mongo_id","name","check_intervals","category","price","resource","invent_number","serial_number","place","device_id","description","specifications","current_action"],"type":"object","properties":{"id":{"title":"Id","type":"string","format":"uuid"},"mongo_id":{"title":"Mongo Id","maxLength":25,"type":"string"},"name":{"title":"Name","maxLength":150,"type":"string"},"check_intervals":{"title":"Check Intervals","maximum":2147483647.0,"minimum":-2147483648.0,"type":"integer"},"category":{"title":"Category","maxLength":30,"type":"string"},"price":{"title":"Price","type":"number"},"resource":{"title":"Resource","maximum":2147483647.0,"minimum":-2147483648.0,"type":"integer"},"resource_of_useful_usage":{"title":"Resource Of Useful Usage","maximum":2147483647.0,"minimum":-2147483648.0,"type":"integer","default":5},"invent_number":{"title":"Invent Number","maxLength":50,"type":"string"},"serial_number":{"title":"Serial Number","maxLength":50,"type":"string"},"place":{"title":"Place","maxLength":60,"type":"string"},"device_id":{"title":"Device Id","type":"string","format":"uuid"},"description":{"title":"Description","type":"string"},"specifications":{"title":"Specifications","type":"array","items":{"type":"object"}},"current_action":{"title":"Current Action","type":"string"}},"additionalProperties":false,"description":"The Active devices model"},"DevicePoolPost":{"title":"DevicePoolPost","required":["description","specifications"],"type":"object","properties":{"description":{"title":"Description","type":"string"},"specifications":{"title":"Specifications","type":"array","items":{"type":"object"}}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"Page_UserOut_":{"title":"Page[UserOut]","required":["items","total"],"type":"object","properties":{"items":{"title":"Items","type":"array","items":{"$ref":"#/components/schemas/UserOut"}},"total":{"title":"Total","minimum":0.0,"type":"integer"},"page":{"title":"Page","minimum":1.0,"type":"integer"},"size":{"title":"Size","minimum":1.0,"type":"integer"},"pages":{"title":"Pages","minimum":0.0,"type":"integer"}}},"UserCredentials":{"title":"UserCredentials","required":["username","password","email","first_name","second_name","third_name","role"],"type":"object","properties":{"username":{"title":"Username","type":"string"},"password":{"title":"Password","type":"string"},"email":{"title":"Email","type":"string","format":"email"},"first_name":{"title":"First Name","type":"string"},"second_name":{"title":"Second Name","type":"string"},"third_name":{"title":"Third Name","type":"string"},"role":{"title":"Role","type":"string"}}},"UserOut":{"title":"UserOut","required":["username","email","created_at","modified_at","full_name"],"type":"object","properties":{"id":{"title":"Id","type":"string","format":"uuid"},"username":{"title":"Username","maxLength":20,"type":"string"},"email":{"title":"Email","maxLength":50,"type":"string"},"first_name":{"title":"First Name","maxLength":50,"type":"string","nullable":true},"second_name":{"title":"Second Name","maxLength":50,"type":"string","nullable":true},"third_name":{"title":"Third Name","maxLength":50,"type":"string","nullable":true},"chief_id":{"title":"Chief Id","type":"string","format":"uuid","nullable":true},"role":{"title":"Role","maxLength":6,"type":"string","description":"admin: ADMIN<br/>chief: CHIEF<br/>worker: WORKER","default":"WORKER","nullable":true},"created_at":{"title":"Created At","type":"string","format":"date-time","readOnly":true},"modified_at":{"title":"Modified At","type":"string","format":"date-time","readOnly":true},"full_name":{"title":"Full Name","type":"string"}},"additionalProperties":false,"description":"The User model"},"UserToken":{"title":"UserToken","type":"object","properties":{"access_token":{"title":"Access Token","type":"string","default":"ACTUAL_TOKEN"},"token_type":{"title":"Token Type","type":"string","default":"Bearer"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/v1/auth/sign_in"}}}}}}